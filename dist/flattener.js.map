{"version":3,"file":"flattener.js","sourceRoot":"","sources":["../src/flattener.ts"],"names":[],"mappings":"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"}